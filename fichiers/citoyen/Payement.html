{% extends "base.html" %}

{% block content %}
<div class="container payment-container">
    <div class="payment-header">
        <h1>Paiement des frais</h1>
        <p>Finalisez votre demande en payant les frais de timbre</p>
    </div>
    
    <div class="payment-content">
        <div class="payment-summary">
            <h2>Récapitulatif de la demande</h2>
            <div class="summary-item">
                <p><strong>Type de document :</strong> Acte de naissance</p>
            </div>
            <div class="summary-item">
                <p><strong>Numéro de demande :</strong> #AB2024-0005</p>
            </div>
            <div class="summary-item">
                <p><strong>Date de demande :</strong> 20/05/2024</p>
            </div>
            <div class="summary-item">
                <p><strong>Montant à payer :</strong> 2 000 FCFA</p>
            </div>
            
            <div class="payment-methods">
                <h3>Méthodes de paiement</h3>
                <div class="method-options">
                    <div class="method-option active" data-method="mobile-money">
                        <img src="https://via.placeholder.com/50" alt="Mobile Money">
                        <span>Mobile Money</span>
                    </div>
                    <div class="method-option" data-method="credit-card">
                        <img src="https://via.placeholder.com/50" alt="Carte Bancaire">
                        <span>Carte Bancaire</span>
                    </div>
                    <div class="method-option" data-method="wave">
                        <img src="https://via.placeholder.com/50" alt="Wave">
                        <span>Wave</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="payment-form">
            <form id="paymentForm">
                <div class="payment-method mobile-money active">
                    <h3>Paiement par Mobile Money</h3>
                    <div class="form-group">
                        <label for="mm-operator">Opérateur</label>
                        <select id="mm-operator" required>
                            <option value="">Sélectionnez un opérateur</option>
                            <option value="mtn">MTN</option>
                            <option value="orange">Orange Money</option>
                            <option value="moov">Moov Money</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="mm-number">Numéro de téléphone</label>
                        <input type="tel" id="mm-number" placeholder="Ex: 07 12 34 56 78" required>
                    </div>
                </div>
                
                <div class="payment-method credit-card">
                    <h3>Paiement par Carte Bancaire</h3>
                    <div class="form-group">
                        <label for="card-number">Numéro de carte</label>
                        <input type="text" id="card-number" placeholder="1234 5678 9012 3456" required>
                    </div>
                    <div class="form-group-row">
                        <div class="form-group">
                            <label for="card-expiry">Date d'expiration</label>
                            <input type="text" id="card-expiry" placeholder="MM/AA" required>
                        </div>
                        <div class="form-group">
                            <label for="card-cvv">CVV</label>
                            <input type="text" id="card-cvv" placeholder="123" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="card-name">Nom sur la carte</label>
                        <input type="text" id="card-name" required>
                    </div>
                </div>
                
                <div class="payment-method wave">
                    <h3>Paiement par Wave</h3>
                    <div class="form-group">
                        <label for="wave-number">Numéro Wave</label>
                        <input type="tel" id="wave-number" placeholder="Ex: 07 12 34 56 78" required>
                    </div>
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="payment-terms" required>
                    <label for="payment-terms">J'autorise le prélèvement du montant indiqué ci-dessus pour cette demande.</label>
                </div>
                
                <button type="submit" class="btn btn-pay">Payer maintenant</button>
            </form>
        </div>
    </div>
</div>

<style>
    .payment-container {
        max-width: 1000px;
    }
    
    .payment-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .payment-header h1 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }
    
    .payment-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }
    
    .payment-summary {
        background: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .payment-summary h2 {
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        font-size: 1.3rem;
    }
    
    .summary-item {
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #eee;
    }
    
    .summary-item:last-child {
        border-bottom: none;
    }
    
    .summary-item p {
        color: #555;
    }
    
    .summary-item strong {
        color: var(--dark-color);
    }
    
    .payment-methods {
        margin-top: 2rem;
    }
    
    .payment-methods h3 {
        margin-bottom: 1rem;
        font-size: 1.1rem;
        color: var(--dark-color);
    }
    
    .method-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 1rem;
    }
    
    .method-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .method-option.active {
        border-color: var(--primary-color);
        background-color: rgba(0, 150, 136, 0.1);
    }
    
    .method-option img {
        width: 50px;
        height: 50px;
        object-fit: contain;
        margin-bottom: 0.5rem;
    }
    
    .method-option span {
        font-size: 0.9rem;
        text-align: center;
    }
    
    .payment-form {
        background: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .payment-method {
        display: none;
    }
    
    .payment-method.active {
        display: block;
    }
    
    .payment-method h3 {
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        font-size: 1.2rem;
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--dark-color);
    }
    
    .form-group input,
    .form-group select {
        width: 100%;
        padding: 0.8rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
    }
    
    .form-group-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }
    
    .checkbox-group {
        display: flex;
        align-items: center;
        margin-top: 2rem;
    }
    
    .checkbox-group input {
        width: auto;
        margin-right: 0.5rem;
    }
    
    .btn-pay {
        width: 100%;
        padding: 1rem;
        font-size: 1.1rem;
        font-weight: 600;
        background-color: var(--success-color);
        margin-top: 1.5rem;
    }
    
    @media (max-width: 768px) {
        .payment-content {
            grid-template-columns: 1fr;
        }
        
        .form-group-row {
            grid-template-columns: 1fr;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const methodOptions = document.querySelectorAll('.method-option');
        const paymentMethods = document.querySelectorAll('.payment-method');
        
        // Switch between payment methods
        methodOptions.forEach(option => {
            option.addEventListener('click', function() {
                const method = this.dataset.method;
                
                // Update active state for options
                methodOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                
                // Show corresponding payment form
                paymentMethods.forEach(form => form.classList.remove('active'));
                document.querySelector(`.payment-method.${method}`).classList.add('active');
            });
        });
        
        // Form submission
        const paymentForm = document.getElementById('paymentForm');
        paymentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Here you would normally process the payment
            alert('Paiement effectué avec succès! Votre demande sera traitée sous 48 heures.');
            window.location.href = 'Mes_demandes.html';
        });
        
        // Format card number input
        const cardNumber = document.getElementById('card-number');
        if (cardNumber) {
            cardNumber.addEventListener('input', function(e) {
                let value = this.value.replace(/\s+/g, '');
                if (value.length > 0) {
                    value = value.match(new RegExp('.{1,4}', 'g')).join(' ');
                }
                this.value = value;
            });
        }
        
        // Format expiry date input
        const cardExpiry = document.getElementById('card-expiry');
        if (cardExpiry) {
            cardExpiry.addEventListener('input', function(e) {
                let value = this.value.replace(/\//g, '');
                if (value.length > 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                this.value = value;
            });
        }
    });
</script>
{% endblock %}